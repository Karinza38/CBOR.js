<!DOCTYPE html><html lang='en'>
<head>
  <link rel='icon' href='webpkiorg.png' sizes='192x192'>
  <meta name='viewport' content='initial-scale=1.0'/>
  <title>CBOR Signature Format (CSF)</title>
  <link rel='stylesheet' type='text/css' href='style.css'>
  <script src='../src/cbor-js-api.js'></script>
  <script>'use strict';
function getRadioValue(name) {
  let ele = document.getElementsByName(name);
  for (var i = 0; i < ele.length; i++) {
    if (ele[i].checked) {
      return ele[i].value;
    }
  }
}
async function delayedConvert() {
  document.getElementById('cborout').children[1].innerHTML = 'Working...';
  setTimeout(function() {
    doConvert();
  }, 200);
}
async function doConvert() {
  let jsonObject = {cborin: document.getElementById('cborin').children[1].value,selin: getRadioValue('selin'),selout: getRadioValue('selout'),seq: document.getElementById('seq').checked,det: document.getElementById('det').checked,con: document.getElementById('con').checked};
  let html = 'unknown error';
  try {
    let object = CBOR.diagnosticNotation(document.getElementById('cborin').children[1].value);
    html = CBOR.toHex(object.encode());
  } catch (e) {
    html = '<span style="color:red;font-weight:bold">' + e + '</span>';
  }
  document.getElementById('cborout').children[1].innerHTML = html;
}
</script>
</head>
<body>
<div class='header'>CBOR Conversion Utility</div>
<div style='padding-top:15pt'>This implementation supports the following subset of CBOR
  primitives: <i>text&nbsp;string</i>, <i>byte&nbsp;string</i>, <i>integer</i>, 
  <i>big&nbsp;integer</i>, <i>floating&nbsp;point</i> (16/32/64 bit), <code>true</code>,
  <code>false</code>, <code>null</code>, and <i>tagged data</i> (CBOR major type 6).</div>
  <div id='cborin' style='padding-top:10pt'><div style='padding-bottom:3pt'>
    <table style='margin-bottom:0.3em;border-spacing:0'>
    <tr><td><input type='radio' name='selin' value='diag' checked></td>
        <td><a href='https://cyberphone.github.io/javaapi/org/webpki/cbor/package-summary.html#diagnostic-notation' target='_blank' title='Documentation'>Diagnostic Notation</a></td></tr>
    <tr><td><input type='radio' name='selin' value='hexa'></td>
        <td>Hexadecimal notation (including possible #-comments)</td></tr>
    <tr><td><input type='radio' name='selin' value='cstyle'></td>
        <td><code>0xhh, 0xhh...</code> notation</td></tr>
    <tr><td><input type='radio' name='selin' value='b64u'></td>
        <td>Base64Url notation</td></tr><tr><td><input type='checkbox' id='seq'></td>
        <td>Sequence</td></tr><tr><td><input type='checkbox' checked id='det'></td>
        <td>Require <a href='https://cyberphone.github.io/javaapi/org/webpki/cbor/package-summary.html#deterministic-encoding' target='_blank' title='Documentation'>Deterministic Encoding</a> for hex/b64u data</td></tr>
    <tr><td><input type='checkbox' id='con'></td><td>Require <a href='https://cyberphone.github.io/javaapi/org/webpki/cbor/package-summary.html#map-key-constraints' target='_blank' title='Documentation'>Constrained Map Keys</a></td></tr>
    </table>Paste a CBOR object in the text box or try with the default:
      </div><textarea rows='10' maxlength='100000' class='textbox' name='cborin'>{
  5: &#034;data&#034;
}</textarea></div>
<div id='cborout' style='padding-top:10pt'><div style='padding-bottom:3pt'><table style='margin-bottom:0.3em;border-spacing:0'><tr><td><input type='radio' name='selout' value='diag'></td><td><a href='https://cyberphone.github.io/javaapi/org/webpki/cbor/package-summary.html#diagnostic-notation' target='_blank' title='Documentation'>Diagnostic Notation</a></td></tr>
    <tr><td><input type='radio' name='selout' value='hexa' checked></td>
        <td>Hexadecimal notation</td></tr><tr><td><input type='radio' name='selout' value='cstyle'></td>
        <td><code>0xhh, 0xhh...</code> notation</td></tr>
    <tr><td><input type='radio' name='selout' value='b64u'></td><td>Base64Url notation</td></tr>
   ¨</table>Converted result using <a href='https://cyberphone.github.io/javaapi/org/webpki/cbor/package-summary.html#deterministic-encoding' target='_blank' title='Documentation'>Deterministic Encoding</a>:</div>
  <div class='staticbox'></div>
  </div>
    <div style='display:flex;justify-content:center'>
      <div class='stdbtn' onclick="delayedConvert()">Convert!</div>
  </div>
  <div>&nbsp;</div>
</body>
</html>
